<!--
@license
Copyright (c) 2017 The expand.js authors. All rights reserved.
This code may only be used under the BSD style license found at https://expandjs.github.io/LICENSE.txt
The complete set of authors may be found at https://expandjs.github.io/AUTHORS.txt
The complete set of contributors may be found at https://expandjs.github.io/CONTRIBUTORS.txt
-->

<!--
A behavior used to add targeting capabilities on a web component.

@behavior xp-targeter-behavior
@since 1.0.0
@category behaviors
@description A behavior used add targeting capabilities on a web component
@keywords expandjs, web components

@homepage https://expandjs.com/components/xp-targeter-behavior
@repository https://github.com/expandjs/xp-elements
@source https://github.com/expandjs/xp-elements/blob/master/xp-targeter-behavior.html

@behavior xp-base-behavior /bower_components/xp-elements/xp-base-behavior.html
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">
<link rel="import" href="xp-base-behavior.html">

<script>

    /**
     * @polymerBehavior Polymer.XPTargeterBehaviorImp
     */
    Polymer.XPTargeterBehaviorImp = {

        /**
         * Finds the targeted element.
         *
         * @method findTarget
         * @returns {Element}
         */
        findTarget() {

            // Let
            let root = this.domHost && Polymer.dom(this.domHost.root);

            // Finding
            if (XP.isElement(this.target)) { return this.target; }
            if (XP.isString(this.target, true) && root) { return root.querySelector('#' + this.target) || null; }
            if (XP.isString(this.target, true)) { return document.getElementById(this.target) || null; }

            return null;
        },

        /*********************************************************************/

        // PROPERTIES
        properties: {

            /**
             * The element's target.
             *
             * @attribute target
             * @type Element | string
             * @notifies
             */
            target: {
                notify: true,
                value: null
            }
        }
    };

    /**
     * @polymerBehavior Polymer.XPTargeterBehavior
     */
    Polymer.XPTargeterBehavior = [
        Polymer.XPBaseBehavior,
        Polymer.XPTargeterBehaviorImp
    ];
</script>
